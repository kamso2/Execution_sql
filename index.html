<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Executor - Admin Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=2.1">
</head>

<body>

    <div class="dashboard-layout">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-brand">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    <span>SQL Execute</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <a href="index.html" class="nav-link active">
                    <span class="icon">‚ö°</span> Ex√©cution
                </a>
                <a href="audit_view.html" id="navAuditLink" class="nav-link">
                    <span class="icon">üìú</span> Audit Logs
                </a>
                <a href="admin_users.html" id="navUsersLink" class="nav-link">
                    <span class="icon">üë•</span> Utilisateurs
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="user-info">
                    <small>Connect√© en tant que</small>
                    <strong id="currentUser">...</strong>
                </div>
                <div class="sidebar-actions">
                    <button id="themeBtn" onclick="toggleTheme()" class="btn-icon" title="Th√®me">üåô</button>
                    <button onclick="logout()" class="btn-icon logout" title="D√©connexion">üö™</button>
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="dashboard-content">
            <div class="main-container">

                <!-- SEARCH CARD -->
                <div class="card" id="queryForm">
                    <div class="card-header">
                        <span class="card-title">1. Configuration de la requ√™te</span>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label" for="querySelector">Type de rapport</label>
                            <select id="querySelector" class="form-control">
                                <!-- Peupl√© par JS -->
                            </select>
                        </div>

                        <div id="parameterInputs">
                            <!-- Champs dynamiques -->
                        </div>

                        <div class="mt-4">
                            <button id="executeBtn" onclick="executeQuery()" class="btn-primary">
                                <span id="btnIcon">‚ñ∂</span>
                                <span id="btnText">Ex√©cuter la requ√™te</span>
                                <div id="loadingSpinner" class="spinner hidden"></div>
                            </button>
                            <button id="resetBtn" onclick="resetForm()" class="btn-secondary">
                                ‚ü≥ R√©initialiser
                            </button>
                        </div>
                    </div>
                </div>



                <!-- RESULTS CARD -->
                <div class="card" id="resultsContainer">
                    <div class="card-header">
                        <span class="card-title">2. R√©sultats</span>
                        <button id="exportCsvBtn" onclick="downloadCSV()" class="btn-success hidden">
                            üì• Exporter CSV
                        </button>
                    </div>
                    <div class="card-body">
                        <div id="resultsTableContainer" class="table-responsive">
                            <div style="text-align: center; color: var(--text-muted); padding: 2rem;">
                                Les r√©sultats s'afficheront ici...
                            </div>
                        </div>

                        <div id="paginationContainer" class="pagination hidden">
                            <button onclick="previousPage()" id="prevBtn">‚Üê Pr√©c√©dent</button>
                            <span id="paginationInfo" style="font-size: 0.9rem; font-weight: 500;"></span>
                            <button onclick="nextPage()" id="nextBtn">Suivant ‚Üí</button>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <!-- TOASTS -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="script.js?v=2.0"></script>
</body>

</html>